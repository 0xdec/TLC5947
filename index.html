<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Architects+Daughter" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>TLC5947 by 0xdec</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>TLC5947</h1>
        <h2>A Texas Instruments TLC5947 library for AVR-G++</h2>
        <a href="https://github.com/0xdec/TLC5947" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a id="tlc5947-library-for-avr-g" class="anchor" href="#tlc5947-library-for-avr-g" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>TLC5947 Library for AVR-G++</h1>

<h2>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Features</h2>

<ul>
<li>Supports up to 255 daisy-chained chips.</li>
<li>Allows for enabling or disabling all outputs simultaneously.</li>
<li>Uses hardware SPI so that you can get the most out of 16MHz.</li>
</ul>

<h2>
<a id="physical-constraints" class="anchor" href="#physical-constraints" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Physical Constraints</h2>

<p>The TLC5947 has 12 bits of resolution for each of its 24 channels. Each channel is a constant-current sink, meaning that it cannot source any current. It also does not matter what voltage is applied to the pins, you can run the LEDS from up to 30V.</p>

<p>If you are daisy-chaining more than one TLC5947, connect the SOUT of the first TLC to the SIN of the next.  All the other pins should just be connected together. The one exception is that each TLC needs it's own resistor between  pin 31 and GND.</p>

<ul>
<li>The 1k resistor between TLC pin 31 and GND will let ~30mA through each LED. This is calculated by the equation I = 49.2 / R. This doesn't depend on the LED driving voltage.</li>
<li>(Optional): put a pull-up resistor (~10k) between BLANK and VCC so that all the LEDs will turn off when the AVR is reset.</li>
</ul>

<h3>
<a id="compatibility" class="anchor" href="#compatibility" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Compatibility</h3>

<p>This library uses SPI to communicate, so it may conflict with any other libraries use SPI.</p>

<h2>
<a id="functions" class="anchor" href="#functions" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Functions:</h2>

<h3>
<a id="tlc5947" class="anchor" href="#tlc5947" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>TLC5947()</h3>

<p>The constructor for the TLC5947 library. If no pins are specified, the chip will default to whatever pins you chose for the first one.</p>

<h3>
<a id="tlc5947latch-blank" class="anchor" href="#tlc5947latch-blank" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>TLC5947(latch, blank)</h3>

<p>The constructor for the TLC5947 library. You must specify a latch and blank pin for the first chip that is declared.</p>

<h4>
<a id="arguments" class="anchor" href="#arguments" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Arguments</h4>

<ul>
<li>
<code>latch</code>: The pin that this chip's latch control is connected to (e.g. PB5).</li>
<li>
<code>blank</code>: The pin that this chip's blank control is connected to (e.g. PB3).</li>
</ul>

<h3>
<a id="chipid" class="anchor" href="#chipid" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>chipID()</h3>

<p>Returns the ID number of the current chip.</p>

<h3>
<a id="readchannel" class="anchor" href="#readchannel" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>read(channel)</h3>

<p>Returns the current value of the specified channel.</p>

<h4>
<a id="arguments-1" class="anchor" href="#arguments-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Arguments</h4>

<ul>
<li>
<code>channel</code>: Channel to be read.</li>
</ul>

<h3>
<a id="setvalues24" class="anchor" href="#setvalues24" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>set(values[24])</h3>

<p>Sets all channels based on the given array.</p>

<h4>
<a id="arguments-2" class="anchor" href="#arguments-2" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Arguments</h4>

<ul>
<li>
<code>values[24]</code>: Brightness values for all channels. Range is [0-4095].</li>
</ul>

<h3>
<a id="setvalue" class="anchor" href="#setvalue" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>set(value)</h3>

<p>Sets all channels to the same value.</p>

<h4>
<a id="arguments-3" class="anchor" href="#arguments-3" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Arguments</h4>

<ul>
<li>
<code>value</code>: Brightness value for all channels. Range is [0-4095].</li>
</ul>

<h3>
<a id="setchannel-value" class="anchor" href="#setchannel-value" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>set(channel, value)</h3>

<p>Sets one channel to the specified value.</p>

<h4>
<a id="arguments-4" class="anchor" href="#arguments-4" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Arguments</h4>

<ul>
<li>
<code>channel</code>: Channel to be set.</li>
<li>
<code>value</code>: Brightness value for the channel. Range is [0-4095].</li>
</ul>

<h3>
<a id="clear" class="anchor" href="#clear" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>clear()</h3>

<p>Sets all channels to 0.</p>

<h3>
<a id="enable" class="anchor" href="#enable" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>enable()</h3>

<p>Enable the chip by pulling the BLANK pin low.</p>

<h3>
<a id="disable" class="anchor" href="#disable" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>disable()</h3>

<p>Disable the chip by pulling the BLANK pin high.</p>

<h3>
<a id="latch" class="anchor" href="#latch" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>latch()</h3>

<p>Latches the data to the outputs.</p>

<h2>
<a id="static-functions" class="anchor" href="#static-functions" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Static Functions</h2>

<h3>
<a id="numchips" class="anchor" href="#numchips" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>numChips()</h3>

<p>Returns the total number of chips.</p>

<h3>
<a id="setallvalue" class="anchor" href="#setallvalue" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>setAll(value);</h3>

<p>Sets all channels on all chips to the specified value.</p>

<h4>
<a id="arguments-5" class="anchor" href="#arguments-5" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Arguments</h4>

<ul>
<li>
<code>value</code>: Brightness value for the channel. Range is [0-4095].</li>
</ul>

<h3>
<a id="clearall" class="anchor" href="#clearall" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>clearAll()</h3>

<p>Sets all channels on all chips to 0.</p>

<h3>
<a id="enablespi" class="anchor" href="#enablespi" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>enableSPI()</h3>

<p>Enable the SPI interface.</p>

<h3>
<a id="disablespi" class="anchor" href="#disablespi" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>disableSPI()</h3>

<p>Disable the SPI interface.</p>

<h3>
<a id="send" class="anchor" href="#send" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>send()</h3>

<p>Shifts the data out to the chips.</p>

<h3>
<a id="update" class="anchor" href="#update" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>update()</h3>

<p>Calls enableSPI() if needed, then send() and latch(). This is all you should use unless your application requires finer control.</p>

<h3>
<a id="shiftshift-value" class="anchor" href="#shiftshift-value" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>shift(shift, value);</h3>

<p>Shifts all data in all chips by the given number of channels. If value is left blank, a circular shift is performed, whereby the data being shifted out of the end gets added back to the beginning.</p>

<h4>
<a id="arguments-6" class="anchor" href="#arguments-6" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Arguments</h4>

<ul>
<li>
<code>shift</code>: Number of channels to shift data by. Defaults to 1.</li>
<li>
<code>value</code>: Brightness value to be shifted in. Range is [0-4095].</li>
</ul>

<h2>
<a id="todo" class="anchor" href="#todo" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>TODO</h2>

<ul>
<li>[ ] Fix the code for shifting an odd number of channels</li>
<li>[ ] Do a check for duplicate pins when calling <code>update()</code>
</li>
</ul>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/0xdec/TLC5947/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/0xdec/TLC5947/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/0xdec/TLC5947"></a> is maintained by <a href="https://github.com/0xdec">0xdec</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>


  </body>
</html>
